(()=>{var e={588:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new j(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===y){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=P(s,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var a=l(e,t,n);if("normal"===a.type){if(r=n.done?y:h,a.arg===d)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r=y,n.method="throw",n.arg=a.arg)}}}(e,n,s),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",y="completed",d={};function m(){}function b(){}function v(){}var g={};g[i]=function(){return this};var w=Object.getPrototypeOf,S=w&&w(w(I([])));S&&S!==n&&r.call(S,i)&&(g=S);var O=v.prototype=m.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,s,c){var a=l(e[o],e,i);if("throw"!==a.type){var u=a.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(a.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function P(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:E}}function E(){return{value:t,done:!0}}return b.prototype=O.constructor=v,v.constructor=b,b.displayName=a(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,a(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},k(x.prototype),x.prototype[s]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new x(u(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(O),a(O,c,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],c=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{"use strict";function e(e,t,n,r,o,i,s){try{var c=e[i](s),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var s=t.apply(n,r);function c(t){e(s,o,i,c,a,"next",t)}function a(t){e(s,o,i,c,a,"throw",t)}c(void 0)}))}}n(588);var r="bnRUsAVEu4IEeE9sFsQx";function o(){return(o=t(regeneratorRuntime.mark((function e(){var t,n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n="https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/".concat(r,"/scores/"),e.prev=2,e.next=5,fetch(n,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 5:return o=e.sent,e.abrupt("return",o.json());case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function i(){return s.apply(this,arguments)}function s(){return(s=t(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/".concat(r,"/scores/"),e.prev=1,e.next=4,fetch(t,{mode:"cors"});case 4:return n=e.sent,e.abrupt("return",n.json());case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,r,o,i,s){try{var c=e[i](s),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,c,"next",e)}function c(e){a(i,r,o,s,c,"throw",e)}s(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,Phaser.Scene);var t,n,r,s,c=(r=a,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(s){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),c.call(this,"GameOverScene")}return t=a,(n=[{key:"init",value:function(e){this.finalScore=e.finalScore}},{key:"create",value:function(){var e=this;this.userName=this.registry.get("name"),this.body=document.body,this.sys.game.sound.stopAll(),this.add.image(0,0,"game-over").setOrigin(0),this.pointsText=this.add.text(.3*this.game.renderer.width,.25*this.game.renderer.height,"Your final score: ".concat(this.finalScore),{fontSize:"35px",fontFamily:"arial",color:"#fff"});var t=this.add.image(.8*this.game.renderer.width,.9*this.game.renderer.height,"back");this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),t.setInteractive(),t.on("pointerover",(function(){e.overSelectSound.play()})),t.on("pointerup",(function(){e.clickSelectSound.play(),e.body.removeChild(e.body.lastChild),e.scene.start("TitleScene")})),console.log(this.userName),this.topScores()}},{key:"topScores",value:function(){var e=this;(function(){return o.apply(this,arguments)})({user:this.userName,score:this.finalScore}).then(u(regeneratorRuntime.mark((function t(){var n,r,o,s,c,a,u,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:for(n=t.sent,r=function(e,t){return t.score-e.score},o=Object.values(n.result).sort(r).slice(0,5),console.log(o),s=document.createElement("ul"),(c=document.createElement("li")).classList.add("label"),c.innerText="Top scores:",s.appendChild(c),s.classList.add("list"),a=0;a<5;a++)u=document.createElement("li"),l=document.createElement("p"),f=document.createElement("p"),l.innerText=o[a].user,u.appendChild(l),f.innerText=o[a].score,u.appendChild(f),u.classList.add("item-list"),s.appendChild(u);e.body.appendChild(s);case 14:case"end":return t.stop()}}),t)}))))}}])&&l(t.prototype,n),a}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"InstructionsScene")}return t=s,(n=[{key:"create",value:function(){var e=this;this.add.image(0,0,"instructions").setOrigin(0);var t=this.add.image(.8*this.game.renderer.width,.9*this.game.renderer.height,"next"),n=this.add.image(.2*this.game.renderer.width,.9*this.game.renderer.height,"back");this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),this.mainTheme=this.sound.add("main-music"),n.setInteractive(),n.on("pointerover",(function(){e.overSelectSound.play()})),n.on("pointerup",(function(){e.clickSelectSound.play(),e.scene.start("IntroductionScene")})),t.setInteractive(),t.on("pointerover",(function(){e.overSelectSound.play()})),t.on("pointerup",(function(){e.clickSelectSound.play(),e.sys.game.sound.stopAll(),e.mainTheme.play({loop:!0}),e.scene.start("GamePlay")}))}}])&&m(t.prototype,n),s}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"IntroductionScene")}return t=s,(n=[{key:"create",value:function(){var e=this;this.add.image(0,0,"introduction").setOrigin(0);var t=this.add.image(.8*this.game.renderer.width,.9*this.game.renderer.height,"next"),n=this.add.image(.2*this.game.renderer.width,.9*this.game.renderer.height,"back");this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),n.setInteractive(),n.on("pointerover",(function(){e.overSelectSound.play()})),n.on("pointerup",(function(){e.clickSelectSound.play(),e.sys.game.sound.stopAll(),e.scene.start("TitleScene")})),t.setInteractive(),t.on("pointerover",(function(){e.overSelectSound.play()})),t.on("pointerup",(function(){e.clickSelectSound.play(),e.scene.start("InstructionsScene")}))}}])&&O(t.prototype,n),s}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"TitleScene")}return t=s,(n=[{key:"create",value:function(){var e=this;this.userName,this.add.image(0,0,"titleImg").setOrigin(0),this.playButton=this.add.image(this.game.renderer.width/2,.65*this.game.renderer.height,"play").setScale(1.5),this.createForm(),this.sound.pauseOnBlur=!1,this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),this.titleTheme=this.sound.add("title-music"),this.titleTheme.play({loop:!0}),this.playButton.setInteractive(),this.playButton.on("pointerover",(function(){e.overSelectSound.play()})),this.playButton.on("pointerup",(function(){e.clickSelectSound.play(),e.scene.start("IntroductionScene")})),this.playButton.visible=!1}},{key:"createForm",value:function(){var e=this,t=document.body,n=document.createElement("form"),r=document.createElement("input");r.setAttribute("required","");var o=document.createElement("p");o.innerText="Player name:",n.appendChild(o),n.appendChild(r),n.classList.add("formInputName","d-block"),r.classList.add("inputBox"),o.classList.add("label"),t.appendChild(n),n.addEventListener("submit",(function(n){n.preventDefault(),e.playButton.visible=!0,e.registry.set("name",r.value),t.removeChild(t.lastChild)}))}}])&&j(t.prototype,n),s}();function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"PreloadScene")}return t=s,(n=[{key:"preload",value:function(){var e=this;this.loadSpritesheets(),this.loadImages(),this.loadMap(),this.loadAudio();var t=this.add.graphics({fillStyle:{color:16777215}});this.load.on("progress",(function(n){t.fillRect(0,e.game.renderer.height/2,e.game.renderer.width*n,50)})),this.load.on("complete",(function(){e.scene.start("TitleScene")}))}},{key:"loadImages",value:function(){this.load.image("white-crystal","./assets/images/whiteCrystal.png"),this.load.image("orange-plant","./assets/images/characters/enemy-plant-orange.png"),this.load.image("blue-plant","./assets/images/characters/enemy-plant-blue.png"),this.load.image("titleImg","./assets/images/bg-btn/title-background.png"),this.load.image("introduction","./assets/images/bg-btn/introduction.png"),this.load.image("instructions","./assets/images/bg-btn/instructions.png"),this.load.image("game-over","./assets/images/bg-btn/game-over.png"),this.load.image("play","./assets/images/bg-btn/play-button.png"),this.load.image("next","./assets/images/bg-btn/next-button.png"),this.load.image("back","./assets/images/bg-btn/back-button.png")}},{key:"loadMap",value:function(){this.load.image("map-atlas","./assets/map/mapTiles.png"),this.load.tilemapTiledJSON("map","./assets/map/map.json")}},{key:"loadSpritesheets",value:function(){this.load.spritesheet("player","./assets/images/characters/player.png",{frameHeight:138.8,frameWidth:109.5})}},{key:"loadAudio",value:function(){this.load.audio("pickup","./assets/audio/pickup.wav"),this.load.audio("overSelect","./assets/audio/over-select.wav"),this.load.audio("clickSelect","./assets/audio/click-select.wav"),this.load.audio("main-music","./assets/audio/main-music.mp3"),this.load.audio("title-music","./assets/audio/title-music.mp3"),this.load.audio("boss-battle","./assets/audio/boss-battle.mp3"),this.load.audio("explosion","./assets/audio/explosion.wav"),this.load.audio("punch","./assets/audio/punch.wav"),this.load.audio("bot-hurt","./assets/audio/bot-hurt.mp3")}}])&&L(t.prototype,n),s}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(o){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return V(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"PointsScene")}return t=s,(n=[{key:"init",value:function(){this.gameScene=this.scene.get("GamePlay")}},{key:"create",value:function(){this.setUpElements(),this.setUpEvents(),this.lastPointsUpdate}},{key:"setUpElements",value:function(){this.pointsText=this.add.text(35,8,"Points: 0",{fontSize:"16px",fontFamily:"arial",color:"#000"})}},{key:"setUpEvents",value:function(){var e=this;this.gameScene.events.on("updateScore",(function(t){e.pointsText.setText("Points: ".concat(t))}))}}])&&D(t.prototype,n),s}();function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(s,Phaser.Physics.Arcade.Sprite);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(r);if(o){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return X(this,e)});function s(e,t,n,r,o){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(c=i.call(this,e,t,n,r,o)).scene=e,c.setDepth(1),c.scene.physics.world.enable(Z(c)),c.setCollideWorldBounds(!0),c.scene.add.existing(Z(c)),c.anims.create({key:"up",frames:c.anims.generateFrameNumbers("player",{frames:[64,65,66,67,68,69,70,71]}),frameRate:10}),c.anims.create({key:"down",frames:c.anims.generateFrameNumbers("player",{frames:[0,1,2,3,4,5,6,7]}),frameRate:10}),c.anims.create({key:"left",frames:c.anims.generateFrameNumbers("player",{frames:[32,33,34,35,36,37,38,39]}),frameRate:10}),c.anims.create({key:"right",frames:c.anims.generateFrameNumbers("player",{frames:[24,25,26,27,28,29,30,31]}),frameRate:10}),c.anims.create({key:"downLeft",frames:c.anims.generateFrameNumbers("player",{frames:[16,17,18,19,20,21,22,23]}),frameRate:10}),c.anims.create({key:"upLeft",frames:c.anims.generateFrameNumbers("player",{frames:[48,49,50,51,52,53,54,55]}),frameRate:10}),c.anims.create({key:"downRight",frames:c.anims.generateFrameNumbers("player",{frames:[8,9,10,11,12,13,14,15]}),frameRate:10}),c.anims.create({key:"upRight",frames:c.anims.generateFrameNumbers("player",{frames:[40,41,42,43,44,45,46,47]}),frameRate:10}),c}return t=s,(n=[{key:"update",value:function(e){this.body.setVelocity(0),this.body.allowGravity=!1,this.moved=!1,e.left.isDown&&(this.moved=!0,this.body.setVelocityX(-150)),e.right.isDown&&(this.moved=!0,this.body.setVelocityX(150)),e.up.isDown&&(this.moved=!0,this.body.setVelocityY(-150)),e.down.isDown&&(this.moved=!0,this.body.setVelocityY(150)),this.moved||this.anims.stop(),0==this.body.velocity.y&&(this.body.velocity.x<0?this.anims.play("left",!0):this.body.velocity.x>0&&this.anims.playReverse("right",!0)),0==this.body.velocity.x&&(this.body.velocity.y<0?this.anims.play("up",!0):this.body.velocity.y>0&&this.anims.play("down",!0)),0!==this.body.velocity.x&&0!==this.body.velocity.y&&(this.body.velocity.x<0&&this.body.velocity.y<0?this.anims.play("upLeft",!0):this.body.velocity.x>0&&this.body.velocity.y>0?this.anims.playReverse("downRight",!0):this.body.velocity.x>0&&this.body.velocity.y<0?this.anims.playReverse("upRight",!0):this.body.velocity.x<0&&this.body.velocity.y>0&&this.anims.play("downLeft",!0))}}])&&H(t.prototype,n),s}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(o,Phaser.Physics.Arcade.Image);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ne(t);if(n){var o=ne(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return ee(this,e)});function o(e,t,n,i,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(c=r.call(this,e,t,n,i,s)).scene=e,c.points=10,c.scene.physics.world.enable(te(c)),c.scene.add.existing(te(c)),c}return o}();function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(r);if(o){var n=ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ce(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"GamePlay")}return t=s,(n=[{key:"init",value:function(){this.scene.launch("PointsScene"),this.score=0}},{key:"create",value:function(){this.createPlayer(),this.createMap(),this.createCrystals(),this.createEnemiesZone(),this.createAudio(),this.cursors=this.input.keyboard.createCursorKeys(),this.physics.add.overlap(this.player,this.crystalsGroup,this.collect,null,this),this.physics.add.overlap(this.player,this.enemies,this.onMeetEnemy,!1,this),this.sys.events.on("wake",this.wake,this)}},{key:"update",value:function(){this.player.update(this.cursors)}},{key:"createPlayer",value:function(){this.player=new q(this,200,1100,"player",1)}},{key:"createMap",value:function(){var e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("map-tileset","map-atlas"),n=(e.createLayer("Terrain",t,0,0),e.createLayer("Obstacles",t,0,0));n.setCollisionByExclusion([-1]),e.createLayer("Details",t,0,0),this.physics.world.bounds.width=e.widthInPixels,this.physics.world.bounds.height=e.heightInPixels,this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.cameras.main.startFollow(this.player),this.physics.add.collider(this.player,n)}},{key:"createCrystals",value:function(){this.crystalsGroup=this.physics.add.group();for(var e=0;e<20;e++)this.spawnCrystal()}},{key:"spawnCrystal",value:function(){var e=Phaser.Math.RND.between(0,900),t=Phaser.Math.RND.between(0,800),n=new re(this,e,t,"white-crystal").setScale(.07);this.crystalsGroup.add(n)}},{key:"createEnemiesZone",value:function(){this.enemies=this.physics.add.group({classType:Phaser.GameObjects.Zone}),this.enemies.create(900,100,100,50)}},{key:"createAudio",value:function(){this.crystalPickupSound=this.sound.add("pickup")}},{key:"collect",value:function(e,t){this.crystalPickupSound.play(),this.score+=t.points,this.events.emit("updateScore",this.score),t.destroy()}},{key:"onMeetEnemy",value:function(e){e.x=Phaser.Math.RND.between(0,this.physics.world.bounds.width),e.y=Phaser.Math.RND.between(0,this.physics.world.bounds.height),this.scene.sleep("PointsScene"),this.scene.start("BattleScene",{score:this.score})}},{key:"wake",value:function(){this.cursors.left.reset(),this.cursors.right.reset(),this.cursors.up.reset(),this.cursors.down.reset()}}])&&ie(t.prototype,n),s}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){pe(o,Phaser.GameObjects.Sprite);var t,n,r=de(o);function o(e,t,n,i,s,c,a,u){var l;return fe(this,o),(l=r.call(this,e,t,n,i,s)).type=c,l.hp=a,l.damage=u,l.living=!0,l.menuItem=null,l}return t=o,(n=[{key:"setMenuItem",value:function(e){this.menuItem=e}},{key:"attack",value:function(e){e.living&&(e.takeDamage(this.damage),this.scene.events.emit("Message",this.type+" attacks "+e.type+" for "+this.damage+" damage. hp "+this.hp))}},{key:"takeDamage",value:function(e){this.hp-=e,this.hp<=0&&(this.hp=0,this.menuItem.unitKilled(),this.living=!1,this.visible=!1,this.menuItem=null)}}])&&he(t.prototype,n),o}(),ge=function(e){pe(n,e);var t=de(n);function n(e,r,o,i,s,c,a,u){var l;return fe(this,n),(l=t.call(this,e,r,o,i,s,c,a,u)).setScale(2),l}return n}(ve),we=function(e){pe(n,e);var t=de(n);function n(e,r,o,i,s,c,a,u){var l;return fe(this,n),(l=t.call(this,e,r,o,i,s,c,a,u)).flipX=!0,l.setScale(1.5),l}return n}(ve);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pe(r);if(o){var n=Pe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xe(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"BattleScene")}return t=s,(n=[{key:"init",value:function(e){this.hp=e.score}},{key:"create",value:function(){this.cameras.main.setBackgroundColor("rgba(0, 200, 0, 0.5)"),this.startBattle(),this.sys.events.on("wake",this.startBattle,this),this.explosion=this.sound.add("explosion"),this.punch=this.sound.add("punch"),this.hurt=this.sound.add("bot-hurt")}},{key:"receivePlayerSelection",value:function(e,t){"attack"==e&&(this.units[this.index].attack(this.enemies[t]),0===this.index?this.explosion.play():1===this.index&&this.punch.play()),this.time.addEvent({delay:3e3,callback:this.nextTurn,callbackScope:this})}},{key:"exitBattle",value:function(){this.scene.sleep("UIScene"),this.scene.switch("GamePlay")}},{key:"wake",value:function(){this.scene.run("UIScene"),this.time.addEvent({delay:2e3,callback:this.exitBattle,callbackScope:this})}},{key:"startBattle",value:function(){this.sys.game.sound.stopAll(),this.battleTheme=this.sound.add("boss-battle"),this.battleTheme.play({loop:!0}),this.cameras.main.setBackgroundColor("rgba(0, 200, 0, 0.5)");var e=new we(this,600,130,"player",1,"BotHero's cannions",this.hp,20);this.add.existing(e);var t=new we(this,600,300,"player",25,"Bot Fists",.8*this.hp,8);this.add.existing(t);var n=new ge(this,150,130,"blue-plant",null,"Enemy",50,15);this.add.existing(n);var r=new ge(this,150,300,"orange-plant",null,"Enemy2",50,10);this.add.existing(r),this.heroes=[e,t],this.enemies=[n,r],this.units=this.heroes.concat(this.enemies),this.index=-1,this.scene.run("UIScene")}},{key:"checkEndBattle",value:function(){for(var e=!0,t=0;t<this.enemies.length;t++)this.enemies[t].living&&(e=!1);for(var n=!0,r=0;r<this.heroes.length;r++)this.heroes[r].living&&(n=!1);return e||n}},{key:"endBattle",value:function(){this.heroes.length=0,this.enemies.length=0;for(var e=0;e<this.units.length;e++)this.units[e].destroy();this.units.length=0,this.scene.sleep("UIScene"),this.scene.start("GameOverScene",{finalScore:this.hp})}},{key:"nextTurn",value:function(){if(this.checkEndBattle())this.endBattle();else{do{this.index++,this.index>=this.units.length&&(this.index=0)}while(!this.units[this.index].living);if(this.units[this.index]instanceof we)this.events.emit("PlayerSelect",this.index);else{var e;do{e=Math.floor(Math.random()*this.heroes.length)}while(!this.heroes[e].living);this.units[this.index].attack(this.heroes[e]),this.hurt.play(),this.time.addEvent({delay:3e3,callback:this.nextTurn,callbackScope:this})}}}}])&&Oe(t.prototype,n),s}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),e}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ce(e);if(t){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ne=function(e){Te(n,Phaser.GameObjects.Text);var t=Me(n);function n(e,r,o,i){return je(this,n),t.call(this,i,e,r,o,{color:"#ffffff",align:"left",fontSize:15})}return Ee(n,[{key:"select",value:function(){this.setColor("#f8ff38")}},{key:"deselect",value:function(){this.setColor("#ffffff")}},{key:"unitKilled",value:function(){this.active=!1,this.visible=!1}}]),n}(),Ae=function(e){Te(n,Phaser.GameObjects.Container);var t=Me(n);function n(e,r,o,i){var s;return je(this,n),(s=t.call(this,o,e,r)).menuItems=[],s.menuItemIndex=0,s.heroes=i,s.x=e,s.y=r,s.selected=!1,s}return Ee(n,[{key:"addMenuItem",value:function(e){var t=new Ne(0,20*this.menuItems.length,e,this.scene);return this.menuItems.push(t),this.add(t),t}},{key:"moveSelectionUp",value:function(){this.menuItems[this.menuItemIndex].deselect();do{this.menuItemIndex--,this.menuItemIndex<0&&(this.menuItemIndex=this.menuItems.length-1)}while(!this.menuItems[this.menuItemIndex].active);this.menuItems[this.menuItemIndex].select()}},{key:"moveSelectionDown",value:function(){this.menuItems[this.menuItemIndex].deselect();do{this.menuItemIndex++,this.menuItemIndex>=this.menuItems.length&&(this.menuItemIndex=0)}while(!this.menuItems[this.menuItemIndex].active);this.menuItems[this.menuItemIndex].select()}},{key:"select",value:function(e){for(e||(e=0),this.menuItems[this.menuItemIndex].deselect(),this.menuItemIndex=e;!this.menuItems[this.menuItemIndex].active;)if(this.menuItemIndex++,this.menuItemIndex>=this.menuItems.length&&(this.menuItemIndex=0),this.menuItemIndex==e)return;this.menuItems[this.menuItemIndex].select(),this.selected=!0}},{key:"deselect",value:function(){this.menuItems[this.menuItemIndex].deselect(),this.menuItemIndex=0,this.selected=!1}},{key:"confirm",value:function(){}},{key:"clear",value:function(){for(var e=0;e<this.menuItems.length;e++)this.menuItems[e].destroy();this.menuItems.length=0,this.menuItemIndex=0}},{key:"remap",value:function(e){this.clear();for(var t=0;t<e.length;t++){var n=e[t];n.setMenuItem(this.addMenuItem(n.type))}this.menuItemIndex=0}}]),n}(),Ge=function(e){Te(n,e);var t=Me(n);function n(e,r,o){return je(this,n),t.call(this,e,r,o)}return n}(Ae),Fe=function(e){Te(n,e);var t=Me(n);function n(e,r,o){var i;return je(this,n),(i=t.call(this,e,r,o)).addMenuItem("Attack"),i}return Ee(n,[{key:"confirm",value:function(){this.scene.events.emit("SelectAction")}}]),n}(Ae),De=function(e){Te(n,e);var t=Me(n);function n(e,r,o){return je(this,n),t.call(this,e,r,o)}return Ee(n,[{key:"confirm",value:function(){this.scene.events.emit("Enemy",this.menuItemIndex)}}]),n}(Ae);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?ze(e):t}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(s,Phaser.GameObjects.Container);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(r);if(o){var n=He(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ye(this,e)});function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=(n=i.call(this,e,260,40)).scene.add.graphics();return n.add(r),r.lineStyle(1,16777215,.8),r.fillStyle(204620,.3),r.strokeRect(-145,-25,280,60),r.fillRect(-145,-25,280,60),n.text=new Phaser.GameObjects.Text(e,0,0,"",{color:"#ffffff",align:"center",fontSize:17,wordWrap:{width:260,useAdvancedWrap:!0}}),n.add(n.text),n.text.setOrigin(.5),t.on("Message",n.showMessage,ze(n)),n.visible=!1,n}return t=s,(n=[{key:"showMessage",value:function(e){this.text.setText(e),this.visible=!0,this.hideEvent&&this.hideEvent.remove(!1),this.hideEvent=this.scene.time.addEvent({delay:2e3,callback:this.hideMessage,callbackScope:this})}},{key:"hideMessage",value:function(){this.hideEvent=null,this.visible=!1}}])&&Ve(t.prototype,n),s}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(s,Phaser.Scene);var t,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qe(r);if(o){var n=Qe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qe(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"UIScene")}return t=s,(n=[{key:"preload",value:function(){}},{key:"remapHeroes",value:function(){var e=this.battleScene.heroes;this.heroesMenu.remap(e)}},{key:"remapEnemies",value:function(){var e=this.battleScene.enemies;this.enemiesMenu.remap(e)}},{key:"onKeyInput",value:function(e){this.currentMenu&&this.currentMenu.selected&&("ArrowUp"===e.code?this.currentMenu.moveSelectionUp():"ArrowDown"===e.code?this.currentMenu.moveSelectionDown():"ArrowRight"===e.code||"Shift"===e.code||"Space"!==e.code&&"ArrowLeft"!==e.code||this.currentMenu.confirm())}},{key:"onPlayerSelect",value:function(e){this.heroesMenu.select(e),this.actionsMenu.select(0),this.currentMenu=this.actionsMenu}},{key:"onSelectAction",value:function(){this.currentMenu=this.enemiesMenu,this.enemiesMenu.select(0)}},{key:"onEnemy",value:function(e){this.heroesMenu.deselect(),this.actionsMenu.deselect(),this.enemiesMenu.deselect(),this.currentMenu=null,this.battleScene.receivePlayerSelection("attack",e)}},{key:"createMenu",value:function(){this.remapHeroes(),this.remapEnemies(),this.battleScene.nextTurn()}},{key:"create",value:function(){this.graphics=this.add.graphics(),this.graphics.lineStyle(1,16777215),this.graphics.fillStyle(204620,1),this.graphics.strokeRect(2,400,220,200),this.graphics.fillRect(2,400,220,200),this.graphics.strokeRect(225,400,220,200),this.graphics.fillRect(225,400,220,200),this.graphics.strokeRect(448,400,350,200),this.graphics.fillRect(448,400,350,200),this.menus=this.add.container(),this.heroesMenu=new Ge(460,425,this),this.actionsMenu=new Fe(250,425,this),this.enemiesMenu=new De(8,425,this),this.currentMenu=this.actionsMenu,this.menus.add(this.heroesMenu),this.menus.add(this.actionsMenu),this.menus.add(this.enemiesMenu),this.battleScene=this.scene.get("BattleScene"),this.input.keyboard.on("keydown",this.onKeyInput,this),this.battleScene.events.on("PlayerSelect",this.onPlayerSelect,this),this.events.on("SelectAction",this.onSelectAction,this),this.events.on("Enemy",this.onEnemy,this),this.sys.events.on("wake",this.createMenu,this),this.message=new We(this,this.battleScene.events),this.add.existing(this.message),this.createMenu()}}])&&Ze(t.prototype,n),s}(),et={type:Phaser.AUTO,width:800,height:600,pixelArt:!0,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[G,B,_,w,ue,Y,_e,$e,y]};new Phaser.Game(et)})()})();