(()=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=y(e);if(t){var a=y(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return n(this,s)}}function n(t,s){return!s||"object"!==e(s)&&"function"!=typeof s?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):s}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){a(i,Phaser.Scene);var s=o(i);function i(){return t(this,i),s.call(this,"Start")}return r(i,[{key:"preload",value:function(){this.load.image("map-atlas","./assets/map/mapTiles.png"),this.load.tilemapTiledJSON("map","./assets/map/map.json"),this.load.spritesheet("player","./assets/images/characters/player.png",{frameHeight:138.8,frameWidth:109.5})}},{key:"create",value:function(){this.scene.start("GamePlay")}}]),i}(),h=function(e){a(i,Phaser.Scene);var s=o(i);function i(){return t(this,i),s.call(this,"GamePlay")}return r(i,[{key:"preload",value:function(){}},{key:"onMeetEnemy",value:function(e,t){t.x=Phaser.Math.RND.between(0,this.physics.world.bounds.width),t.y=Phaser.Math.RND.between(0,this.physics.world.bounds.height),this.cameras.main.shake(300)}},{key:"create",value:function(){var e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("map-tileset","map-atlas"),s=(e.createLayer("Terrain",t,0,0),e.createLayer("Obstacles",t,0,0));s.setCollisionByExclusion([-1]),e.createLayer("Details",t,0,0),this.player=this.physics.add.sprite(400,12750,"player",64),this.physics.world.bounds.width=e.widthInPixels,this.physics.world.bounds.height=e.heightInPixels,this.player.setCollideWorldBounds(!0),this.cursors=this.input.keyboard.createCursorKeys(),this.anims.create({key:"up",frames:this.anims.generateFrameNumbers("player",{frames:[64,65,66,67,68,69,70,71]}),frameRate:10}),this.anims.create({key:"down",frames:this.anims.generateFrameNumbers("player",{frames:[0,1,2,3,4,5,6,7]}),frameRate:10}),this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("player",{frames:[32,33,34,35,36,37,38,39]}),frameRate:10}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("player",{frames:[24,25,26,27,28,29,30,31]}),frameRate:10}),this.anims.create({key:"downLeft",frames:this.anims.generateFrameNumbers("player",{frames:[16,17,18,19,20,21,22,23]}),frameRate:10}),this.anims.create({key:"upLeft",frames:this.anims.generateFrameNumbers("player",{frames:[48,49,50,51,52,53,54,55]}),frameRate:10}),this.anims.create({key:"downRight",frames:this.anims.generateFrameNumbers("player",{frames:[8,9,10,11,12,13,14,15]}),frameRate:10}),this.anims.create({key:"upRight",frames:this.anims.generateFrameNumbers("player",{frames:[40,41,42,43,44,45,46,47]}),frameRate:10}),this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.cameras.main.startFollow(this.player),this.player.setCollideWorldBounds(!0),this.physics.add.collider(this.player,s),this.enemies=this.physics.add.group({classType:Phaser.GameObjects.Zone});for(var r=0;r<10;r++){var a=Phaser.Math.RND.between(0,this.physics.world.bounds.width),i=Phaser.Math.RND.between(0,this.physics.world.bounds.height);this.enemies.create(a,i,20,20)}this.physics.add.overlap(this.player,this.enemies,this.onMeetEnemy,!1,this)}},{key:"update",value:function(){this.player.body.setVelocity(0),this.player.body.allowGravity=!1,this.moved=!1,this.cursors.left.isDown&&(this.moved=!0,this.player.body.setVelocityX(-150)),this.cursors.right.isDown&&(this.moved=!0,this.player.body.setVelocityX(150)),this.cursors.up.isDown&&(this.moved=!0,this.player.body.setVelocityY(-150)),this.cursors.down.isDown&&(this.moved=!0,this.player.body.setVelocityY(150)),this.moved||this.player.anims.stop(),0==this.player.body.velocity.y&&(this.player.body.velocity.x<0?this.player.anims.play("left",!0):this.player.body.velocity.x>0&&this.player.anims.playReverse("right",!0)),0==this.player.body.velocity.x&&(this.player.body.velocity.y<0?this.player.anims.play("up",!0):this.player.body.velocity.y>0&&this.player.anims.play("down",!0)),0!==this.player.body.velocity.x&&0!==this.player.body.velocity.y&&(this.player.body.velocity.x<0&&this.player.body.velocity.y<0?this.player.anims.play("upLeft",!0):this.player.body.velocity.x>0&&this.player.body.velocity.y>0?this.player.anims.playReverse("downRight",!0):this.player.body.velocity.x>0&&this.player.body.velocity.y<0?this.player.anims.playReverse("upRight",!0):this.player.body.velocity.x<0&&this.player.body.velocity.y>0&&this.player.anims.play("downLeft",!0))}}]),i}(),c={type:Phaser.AUTO,width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!0}},scene:[l,h]};new Phaser.Game(c)})();