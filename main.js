(()=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(l,Phaser.Scene);var i,s,c,u,a=(c=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=r(c);if(u){var n=r(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return o(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.call(this,"GameOverScene")}return i=l,(s=[{key:"init",value:function(e){this.finalScore=e.finalScore}},{key:"create",value:function(){var e=this;this.sys.game.sound.stopAll(),this.add.image(0,0,"game-over").setOrigin(0),this.pointsText=this.add.text(.3*this.game.renderer.width,.3*this.game.renderer.height,"FINAL SCORE: ".concat(this.finalScore),{fontSize:"35px",fontFamily:"arial",color:"#fff"});var t=this.add.image(.8*this.game.renderer.width,.9*this.game.renderer.height,"back");this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),t.setInteractive(),t.on("pointerover",(function(){e.overSelectSound.play()})),t.on("pointerup",(function(){e.clickSelectSound.play(),e.scene.start("TitleScene")}))}}])&&t(i.prototype,s),l}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(o);if(r){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"InstructionsScene")}return t=s,(n=[{key:"create",value:function(){var e=this;this.add.image(0,0,"instructions").setOrigin(0);var t=this.add.image(.8*this.game.renderer.width,.9*this.game.renderer.height,"next"),n=this.add.image(.2*this.game.renderer.width,.9*this.game.renderer.height,"back");this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),this.mainTheme=this.sound.add("main-music"),n.setInteractive(),n.on("pointerover",(function(){e.overSelectSound.play()})),n.on("pointerup",(function(){e.clickSelectSound.play(),e.scene.start("IntroductionScene")})),t.setInteractive(),t.on("pointerover",(function(){e.overSelectSound.play()})),t.on("pointerup",(function(){e.clickSelectSound.play(),e.sys.game.sound.stopAll(),e.mainTheme.play({loop:!0}),e.scene.start("GamePlay")}))}}])&&c(t.prototype,n),s}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(o);if(r){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"IntroductionScene")}return t=s,(n=[{key:"create",value:function(){var e=this;this.add.image(0,0,"introduction").setOrigin(0);var t=this.add.image(.8*this.game.renderer.width,.9*this.game.renderer.height,"next"),n=this.add.image(.2*this.game.renderer.width,.9*this.game.renderer.height,"back");this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),n.setInteractive(),n.on("pointerover",(function(){e.overSelectSound.play()})),n.on("pointerup",(function(){e.clickSelectSound.play(),e.sys.game.sound.stopAll(),e.scene.start("TitleScene")})),t.setInteractive(),t.on("pointerover",(function(){e.overSelectSound.play()})),t.on("pointerup",(function(){e.clickSelectSound.play(),e.scene.start("InstructionsScene")}))}}])&&y(t.prototype,n),s}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(o);if(r){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"TitleScene")}return t=s,(n=[{key:"create",value:function(){var e=this;this.add.image(0,0,"titleImg").setOrigin(0);var t=this.add.image(this.game.renderer.width/2,.65*this.game.renderer.height,"play").setScale(1.5);this.sound.pauseOnBlur=!1,this.clickSelectSound=this.sound.add("clickSelect"),this.overSelectSound=this.sound.add("overSelect"),this.titleTheme=this.sound.add("title-music"),this.titleTheme.play({loop:!0}),t.setInteractive(),t.on("pointerover",(function(){e.overSelectSound.play()})),t.on("pointerup",(function(){e.clickSelectSound.play(),e.scene.start("IntroductionScene")}))}}])&&g(t.prototype,n),s}();function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(o);if(r){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"PreloadScene")}return t=s,(n=[{key:"preload",value:function(){var e=this;this.loadSpritesheets(),this.loadImages(),this.loadMap(),this.loadAudio();var t=this.add.graphics({fillStyle:{color:16777215}});this.load.on("progress",(function(n){t.fillRect(0,e.game.renderer.height/2,e.game.renderer.width*n,50)})),this.load.on("complete",(function(){e.scene.start("TitleScene")}))}},{key:"loadImages",value:function(){this.load.image("white-crystal","./assets/images/whiteCrystal.png"),this.load.image("orange-plant","./assets/images/characters/enemy-plant-orange.png"),this.load.image("blue-plant","./assets/images/characters/enemy-plant-blue.png"),this.load.image("titleImg","./assets/images/bg-btn/title-background.png"),this.load.image("introduction","./assets/images/bg-btn/introduction.png"),this.load.image("instructions","./assets/images/bg-btn/instructions.png"),this.load.image("game-over","./assets/images/bg-btn/game-over.png"),this.load.image("play","./assets/images/bg-btn/play-button.png"),this.load.image("next","./assets/images/bg-btn/next-button.png"),this.load.image("back","./assets/images/bg-btn/back-button.png")}},{key:"loadMap",value:function(){this.load.image("map-atlas","./assets/map/mapTiles.png"),this.load.tilemapTiledJSON("map","./assets/map/map.json")}},{key:"loadSpritesheets",value:function(){this.load.spritesheet("player","./assets/images/characters/player.png",{frameHeight:138.8,frameWidth:109.5})}},{key:"loadAudio",value:function(){this.load.audio("pickup","./assets/audio/pickup.wav"),this.load.audio("overSelect","./assets/audio/over-select.wav"),this.load.audio("clickSelect","./assets/audio/click-select.wav"),this.load.audio("main-music","./assets/audio/main-music.mp3"),this.load.audio("title-music","./assets/audio/title-music.mp3"),this.load.audio("boss-battle","./assets/audio/boss-battle.mp3"),this.load.audio("explosion","./assets/audio/explosion.wav"),this.load.audio("punch","./assets/audio/punch.wav"),this.load.audio("bot-hurt","./assets/audio/bot-hurt.mp3")}}])&&x(t.prototype,n),s}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(r){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"PointsScene")}return t=s,(n=[{key:"init",value:function(){this.gameScene=this.scene.get("GamePlay")}},{key:"create",value:function(){this.setUpElements(),this.setUpEvents(),this.lastPointsUpdate}},{key:"setUpElements",value:function(){this.pointsText=this.add.text(35,8,"Points: 0",{fontSize:"16px",fontFamily:"arial",color:"#000"})}},{key:"setUpEvents",value:function(){var e=this;this.gameScene.events.on("updateScore",(function(t){e.pointsText.setText("Points: ".concat(t))}))}}])&&T(t.prototype,n),s}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(s,Phaser.Physics.Arcade.Sprite);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(o);if(r){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function s(e,t,n,o,r){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(c=i.call(this,e,t,n,o,r)).scene=e,c.setDepth(1),c.scene.physics.world.enable(F(c)),c.setCollideWorldBounds(!0),c.scene.add.existing(F(c)),c.anims.create({key:"up",frames:c.anims.generateFrameNumbers("player",{frames:[64,65,66,67,68,69,70,71]}),frameRate:10}),c.anims.create({key:"down",frames:c.anims.generateFrameNumbers("player",{frames:[0,1,2,3,4,5,6,7]}),frameRate:10}),c.anims.create({key:"left",frames:c.anims.generateFrameNumbers("player",{frames:[32,33,34,35,36,37,38,39]}),frameRate:10}),c.anims.create({key:"right",frames:c.anims.generateFrameNumbers("player",{frames:[24,25,26,27,28,29,30,31]}),frameRate:10}),c.anims.create({key:"downLeft",frames:c.anims.generateFrameNumbers("player",{frames:[16,17,18,19,20,21,22,23]}),frameRate:10}),c.anims.create({key:"upLeft",frames:c.anims.generateFrameNumbers("player",{frames:[48,49,50,51,52,53,54,55]}),frameRate:10}),c.anims.create({key:"downRight",frames:c.anims.generateFrameNumbers("player",{frames:[8,9,10,11,12,13,14,15]}),frameRate:10}),c.anims.create({key:"upRight",frames:c.anims.generateFrameNumbers("player",{frames:[40,41,42,43,44,45,46,47]}),frameRate:10}),c}return t=s,(n=[{key:"update",value:function(e){this.body.setVelocity(0),this.body.allowGravity=!1,this.moved=!1,e.left.isDown&&(this.moved=!0,this.body.setVelocityX(-150)),e.right.isDown&&(this.moved=!0,this.body.setVelocityX(150)),e.up.isDown&&(this.moved=!0,this.body.setVelocityY(-150)),e.down.isDown&&(this.moved=!0,this.body.setVelocityY(150)),this.moved||this.anims.stop(),0==this.body.velocity.y&&(this.body.velocity.x<0?this.anims.play("left",!0):this.body.velocity.x>0&&this.anims.playReverse("right",!0)),0==this.body.velocity.x&&(this.body.velocity.y<0?this.anims.play("up",!0):this.body.velocity.y>0&&this.anims.play("down",!0)),0!==this.body.velocity.x&&0!==this.body.velocity.y&&(this.body.velocity.x<0&&this.body.velocity.y<0?this.anims.play("upLeft",!0):this.body.velocity.x>0&&this.body.velocity.y>0?this.anims.playReverse("downRight",!0):this.body.velocity.x>0&&this.body.velocity.y<0?this.anims.playReverse("upRight",!0):this.body.velocity.x<0&&this.body.velocity.y>0&&this.anims.play("downLeft",!0))}}])&&D(t.prototype,n),s}();function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(r,Phaser.Physics.Arcade.Image);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=X(t);if(n){var r=X(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return H(this,e)});function r(e,t,n,i,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(c=o.call(this,e,t,n,i,s)).scene=e,c.points=10,c.scene.physics.world.enable(W(c)),c.scene.add.existing(W(c)),c}return r}();function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(o);if(r){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Q(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"GamePlay")}return t=s,(n=[{key:"init",value:function(){this.scene.launch("PointsScene"),this.score=0}},{key:"create",value:function(){this.createPlayer(),this.createMap(),this.createCrystals(),this.createEnemiesZone(),this.createAudio(),this.cursors=this.input.keyboard.createCursorKeys(),this.physics.add.overlap(this.player,this.crystalsGroup,this.collect,null,this),this.physics.add.overlap(this.player,this.enemies,this.onMeetEnemy,!1,this),this.sys.events.on("wake",this.wake,this)}},{key:"update",value:function(){this.player.update(this.cursors)}},{key:"createPlayer",value:function(){this.player=new K(this,200,1100,"player",1)}},{key:"createMap",value:function(){var e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("map-tileset","map-atlas"),n=(e.createLayer("Terrain",t,0,0),e.createLayer("Obstacles",t,0,0));n.setCollisionByExclusion([-1]),e.createLayer("Details",t,0,0),this.physics.world.bounds.width=e.widthInPixels,this.physics.world.bounds.height=e.heightInPixels,this.cameras.main.setBounds(0,0,e.widthInPixels,e.heightInPixels),this.cameras.main.startFollow(this.player),this.physics.add.collider(this.player,n)}},{key:"createCrystals",value:function(){this.crystalsGroup=this.physics.add.group();for(var e=0;e<20;e++)this.spawnCrystal()}},{key:"spawnCrystal",value:function(){var e=Phaser.Math.RND.between(0,900),t=Phaser.Math.RND.between(0,800),n=new Z(this,e,t,"white-crystal").setScale(.07);this.crystalsGroup.add(n)}},{key:"createEnemiesZone",value:function(){this.enemies=this.physics.add.group({classType:Phaser.GameObjects.Zone}),this.enemies.create(900,100,100,50)}},{key:"createAudio",value:function(){this.crystalPickupSound=this.sound.add("pickup")}},{key:"collect",value:function(e,t){this.crystalPickupSound.play(),this.score+=t.points,this.events.emit("updateScore",this.score),t.destroy()}},{key:"onMeetEnemy",value:function(e){e.x=Phaser.Math.RND.between(0,this.physics.world.bounds.width),e.y=Phaser.Math.RND.between(0,this.physics.world.bounds.height),this.scene.sleep("PointsScene"),this.scene.start("BattleScene",{score:this.score})}},{key:"wake",value:function(){this.cursors.left.reset(),this.cursors.right.reset(),this.cursors.up.reset(),this.cursors.down.reset()}}])&&J(t.prototype,n),s}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ue(e);if(t){var r=ue(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(e){re(r,Phaser.GameObjects.Sprite);var t,n,o=se(r);function r(e,t,n,i,s,c,u,a){var l;return ne(this,r),(l=o.call(this,e,t,n,i,s)).type=c,l.hp=u,l.damage=a,l.living=!0,l.menuItem=null,l}return t=r,(n=[{key:"setMenuItem",value:function(e){this.menuItem=e}},{key:"attack",value:function(e){e.living&&(e.takeDamage(this.damage),this.scene.events.emit("Message",this.type+" attacks "+e.type+" for "+this.damage+" damage. hp "+this.hp))}},{key:"takeDamage",value:function(e){this.hp-=e,this.hp<=0&&(this.hp=0,this.menuItem.unitKilled(),this.living=!1,this.visible=!1,this.menuItem=null)}}])&&oe(t.prototype,n),r}(),le=function(e){re(n,e);var t=se(n);function n(e,o,r,i,s,c,u,a){var l;return ne(this,n),(l=t.call(this,e,o,r,i,s,c,u,a)).setScale(2),l}return n}(ae),fe=function(e){re(n,e);var t=se(n);function n(e,o,r,i,s,c,u,a){var l;return ne(this,n),(l=t.call(this,e,o,r,i,s,c,u,a)).flipX=!0,l.setScale(1.5),l}return n}(ae);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(o);if(r){var n=de(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return me(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"BattleScene")}return t=s,(n=[{key:"init",value:function(e){this.hp=e.score}},{key:"create",value:function(){this.cameras.main.setBackgroundColor("rgba(0, 200, 0, 0.5)"),this.startBattle(),this.sys.events.on("wake",this.startBattle,this),this.explosion=this.sound.add("explosion"),this.punch=this.sound.add("punch"),this.hurt=this.sound.add("bot-hurt")}},{key:"receivePlayerSelection",value:function(e,t){"attack"==e&&(this.units[this.index].attack(this.enemies[t]),0===this.index?this.explosion.play():1===this.index&&this.punch.play()),this.time.addEvent({delay:3e3,callback:this.nextTurn,callbackScope:this})}},{key:"exitBattle",value:function(){this.scene.sleep("UIScene"),this.scene.switch("GamePlay")}},{key:"wake",value:function(){this.scene.run("UIScene"),this.time.addEvent({delay:2e3,callback:this.exitBattle,callbackScope:this})}},{key:"startBattle",value:function(){this.sys.game.sound.stopAll(),this.battleTheme=this.sound.add("boss-battle"),this.battleTheme.play({loop:!0}),this.cameras.main.setBackgroundColor("rgba(0, 200, 0, 0.5)");var e=new fe(this,600,130,"player",1,"BotHero's cannions",this.hp,20);this.add.existing(e);var t=new fe(this,600,300,"player",25,"Bot Fists",.8*this.hp,8);this.add.existing(t);var n=new le(this,150,130,"blue-plant",null,"Enemy",50,3);this.add.existing(n);var o=new le(this,150,300,"orange-plant",null,"Enemy2",50,3);this.add.existing(o),this.heroes=[e,t],this.enemies=[n,o],this.units=this.heroes.concat(this.enemies),this.index=-1,this.scene.run("UIScene")}},{key:"checkEndBattle",value:function(){for(var e=!0,t=0;t<this.enemies.length;t++)this.enemies[t].living&&(e=!1);for(var n=!0,o=0;o<this.heroes.length;o++)this.heroes[o].living&&(n=!1);return e||n}},{key:"endBattle",value:function(){this.heroes.length=0,this.enemies.length=0;for(var e=0;e<this.units.length;e++)this.units[e].destroy();this.units.length=0,this.scene.sleep("UIScene"),this.scene.start("GameOverScene",{finalScore:this.hp})}},{key:"nextTurn",value:function(){if(this.checkEndBattle())this.endBattle();else{do{this.index++,this.index>=this.units.length&&(this.index=0)}while(!this.units[this.index].living);if(this.units[this.index]instanceof fe)this.events.emit("PlayerSelect",this.index);else{var e;do{e=Math.floor(Math.random()*this.heroes.length)}while(!this.heroes[e].living);this.units[this.index].attack(this.heroes[e]),this.hurt.play(),this.time.addEvent({delay:3e3,callback:this.nextTurn,callbackScope:this})}}}}])&&ye(t.prototype,n),s}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function we(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re(e);if(t){var r=Re(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return xe(this,n)}}function xe(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){Oe(n,Phaser.GameObjects.Text);var t=Pe(n);function n(e,o,r,i){return ge(this,n),t.call(this,i,e,o,r,{color:"#ffffff",align:"left",fontSize:15})}return we(n,[{key:"select",value:function(){this.setColor("#f8ff38")}},{key:"deselect",value:function(){this.setColor("#ffffff")}},{key:"unitKilled",value:function(){this.active=!1,this.visible=!1}}]),n}(),Ie=function(e){Oe(n,Phaser.GameObjects.Container);var t=Pe(n);function n(e,o,r,i){var s;return ge(this,n),(s=t.call(this,r,e,o)).menuItems=[],s.menuItemIndex=0,s.heroes=i,s.x=e,s.y=o,s.selected=!1,s}return we(n,[{key:"addMenuItem",value:function(e){var t=new _e(0,20*this.menuItems.length,e,this.scene);return this.menuItems.push(t),this.add(t),t}},{key:"moveSelectionUp",value:function(){this.menuItems[this.menuItemIndex].deselect();do{this.menuItemIndex--,this.menuItemIndex<0&&(this.menuItemIndex=this.menuItems.length-1)}while(!this.menuItems[this.menuItemIndex].active);this.menuItems[this.menuItemIndex].select()}},{key:"moveSelectionDown",value:function(){this.menuItems[this.menuItemIndex].deselect();do{this.menuItemIndex++,this.menuItemIndex>=this.menuItems.length&&(this.menuItemIndex=0)}while(!this.menuItems[this.menuItemIndex].active);this.menuItems[this.menuItemIndex].select()}},{key:"select",value:function(e){for(e||(e=0),this.menuItems[this.menuItemIndex].deselect(),this.menuItemIndex=e;!this.menuItems[this.menuItemIndex].active;)if(this.menuItemIndex++,this.menuItemIndex>=this.menuItems.length&&(this.menuItemIndex=0),this.menuItemIndex==e)return;this.menuItems[this.menuItemIndex].select(),this.selected=!0}},{key:"deselect",value:function(){this.menuItems[this.menuItemIndex].deselect(),this.menuItemIndex=0,this.selected=!1}},{key:"confirm",value:function(){}},{key:"clear",value:function(){for(var e=0;e<this.menuItems.length;e++)this.menuItems[e].destroy();this.menuItems.length=0,this.menuItemIndex=0}},{key:"remap",value:function(e){this.clear();for(var t=0;t<e.length;t++){var n=e[t];n.setMenuItem(this.addMenuItem(n.type))}this.menuItemIndex=0}}]),n}(),je=function(e){Oe(n,e);var t=Pe(n);function n(e,o,r){return ge(this,n),t.call(this,e,o,r)}return n}(Ie),Ee=function(e){Oe(n,e);var t=Pe(n);function n(e,o,r){var i;return ge(this,n),(i=t.call(this,e,o,r)).addMenuItem("Attack"),i}return we(n,[{key:"confirm",value:function(){this.scene.events.emit("SelectAction")}}]),n}(Ie),Te=function(e){Oe(n,e);var t=Pe(n);function n(e,o,r){return ge(this,n),t.call(this,e,o,r)}return we(n,[{key:"confirm",value:function(){this.scene.events.emit("Enemy",this.menuItemIndex)}}]),n}(Ie);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?Ge(e):t}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(s,Phaser.GameObjects.Container);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=De(o);if(r){var n=De(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ae(this,e)});function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=(n=i.call(this,e,260,40)).scene.add.graphics();return n.add(o),o.lineStyle(1,16777215,.8),o.fillStyle(204620,.3),o.strokeRect(-145,-25,280,60),o.fillRect(-145,-25,280,60),n.text=new Phaser.GameObjects.Text(e,0,0,"",{color:"#ffffff",align:"center",fontSize:17,wordWrap:{width:260,useAdvancedWrap:!0}}),n.add(n.text),n.text.setOrigin(.5),t.on("Message",n.showMessage,Ge(n)),n.visible=!1,n}return t=s,(n=[{key:"showMessage",value:function(e){this.text.setText(e),this.visible=!0,this.hideEvent&&this.hideEvent.remove(!1),this.hideEvent=this.scene.time.addEvent({delay:2e3,callback:this.hideMessage,callbackScope:this})}},{key:"hideMessage",value:function(){this.hideEvent=null,this.visible=!1}}])&&Be(t.prototype,n),s}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(s,Phaser.Scene);var t,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ve(o);if(r){var n=Ve(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ke(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,"UIScene")}return t=s,(n=[{key:"preload",value:function(){}},{key:"remapHeroes",value:function(){var e=this.battleScene.heroes;this.heroesMenu.remap(e)}},{key:"remapEnemies",value:function(){var e=this.battleScene.enemies;this.enemiesMenu.remap(e)}},{key:"onKeyInput",value:function(e){this.currentMenu&&this.currentMenu.selected&&("ArrowUp"===e.code?this.currentMenu.moveSelectionUp():"ArrowDown"===e.code?this.currentMenu.moveSelectionDown():"ArrowRight"===e.code||"Shift"===e.code||"Space"!==e.code&&"ArrowLeft"!==e.code||this.currentMenu.confirm())}},{key:"onPlayerSelect",value:function(e){this.heroesMenu.select(e),this.actionsMenu.select(0),this.currentMenu=this.actionsMenu}},{key:"onSelectAction",value:function(){this.currentMenu=this.enemiesMenu,this.enemiesMenu.select(0)}},{key:"onEnemy",value:function(e){this.heroesMenu.deselect(),this.actionsMenu.deselect(),this.enemiesMenu.deselect(),this.currentMenu=null,this.battleScene.receivePlayerSelection("attack",e)}},{key:"createMenu",value:function(){this.remapHeroes(),this.remapEnemies(),this.battleScene.nextTurn()}},{key:"create",value:function(){this.graphics=this.add.graphics(),this.graphics.lineStyle(1,16777215),this.graphics.fillStyle(204620,1),this.graphics.strokeRect(2,400,220,200),this.graphics.fillRect(2,400,220,200),this.graphics.strokeRect(225,400,220,200),this.graphics.fillRect(225,400,220,200),this.graphics.strokeRect(448,400,350,200),this.graphics.fillRect(448,400,350,200),this.menus=this.add.container(),this.heroesMenu=new je(460,425,this),this.actionsMenu=new Ee(250,425,this),this.enemiesMenu=new Te(8,425,this),this.currentMenu=this.actionsMenu,this.menus.add(this.heroesMenu),this.menus.add(this.actionsMenu),this.menus.add(this.enemiesMenu),this.battleScene=this.scene.get("BattleScene"),this.input.keyboard.on("keydown",this.onKeyInput,this),this.battleScene.events.on("PlayerSelect",this.onPlayerSelect,this),this.events.on("SelectAction",this.onSelectAction,this),this.events.on("Enemy",this.onEnemy,this),this.sys.events.on("wake",this.createMenu,this),this.message=new Ne(this,this.battleScene.events),this.add.existing(this.message),this.createMenu()}}])&&Fe(t.prototype,n),s}(),He={type:Phaser.AUTO,width:800,height:600,pixelArt:!0,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[j,k,b,f,ee,A,be,ze,i]};new Phaser.Game(He)})();